'use strict';

window.addEventListener('DOMContentLoaded', () => {
    const body = document.querySelector('body'),
          wrapper = document.querySelector('.wrapper'),
          iconMenu = document.querySelector('.icon-menu'),
          menuBody = document.querySelector('.menu__body'),
          menuLinks = document.querySelectorAll('.menu__link');

    iconMenu.addEventListener('click', () => {
        iconMenu.classList.toggle('active');
        menuBody.classList.toggle('active');
        // wrapper.classList.toggle('lock');
        header.classList.toggle('lock');
        body.classList.toggle('lock');
    });

    menuLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (wrapper.clientWidth < 991.98) {
                iconMenu.classList.remove('active');
                menuBody.classList.remove('active');
                // wrapper.classList.remove('lock');
                header.classList.remove('lock');
                body.classList.remove('lock');
            }
        });
    });

// *================================================
    const doc = document.documentElement,
          header = document.querySelector('.header');

    let prevScroll = window.scrollY || doc.scrollTop;
    let curScroll;
    let direction = 0;
    let prevDirection = 0;


    
    let checkScroll = function () {
        curScroll = window.scrollY || doc.scrollTop;
        if (curScroll > prevScroll) {
            direction = 2;
        } else if (curScroll < prevScroll) {
            direction = 1;
        }

        if (direction !== prevDirection) {
            toggleHeader(direction, curScroll);
        }

        if (window.scrollY === 0) {
            header.style.background = 'transparent';
            header.style.padding = '35px 0 31px 0';
        }else {
            header.style.background = '#040300';
            header.style.padding = '20px 0';
        }

        prevScroll = curScroll;
    };

    let toggleHeader = function (direction, curScroll) {
        if (direction === 2 && curScroll > 60) {
            header.classList.add('nav-up');
            prevDirection = direction;
        } else if (direction === 1) {
            header.classList.remove('nav-up');
            prevDirection = direction;
        }
    };

    window.addEventListener('scroll', checkScroll);

    //* Плавный скролл===========================================================
    $(document).ready(function () {
        $("a[href*='#']").on("click", function (e) {
            var anchor = $(this);
            $('html, body').stop().animate({
                scrollTop: $(anchor.attr('href')).offset().top
            }, 777);
            e.preventDefault();
            return false;
        });
    });
    //* Плавный скролл===========================================================
});